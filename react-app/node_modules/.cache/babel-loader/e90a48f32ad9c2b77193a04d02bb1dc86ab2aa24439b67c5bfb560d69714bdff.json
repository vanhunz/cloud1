{"ast":null,"code":"var _excluded = [\"sourceX\", \"sourceY\", \"sourceControlX\", \"targetX\", \"targetY\", \"targetControlX\", \"linkWidth\"],\n  _excluded2 = [\"className\", \"style\", \"children\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nimport * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport maxBy from 'es-toolkit/compat/maxBy';\nimport sumBy from 'es-toolkit/compat/sumBy';\nimport get from 'es-toolkit/compat/get';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../shape/Rectangle';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { ReportChartMargin, ReportChartSize, useChartHeight, useChartWidth } from '../context/chartLayoutContext';\nimport { TooltipPortalContext } from '../context/tooltipPortalContext';\nimport { RechartsWrapper } from './RechartsWrapper';\nimport { RechartsStoreProvider } from '../state/RechartsStoreProvider';\nimport { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetComputedData } from '../context/chartDataContext';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isPositiveNumber } from '../util/isWellBehavedNumber';\nvar interpolationGenerator = (a, b) => {\n  var ka = +a;\n  var kb = b - ka;\n  return t => ka + kb * t;\n};\nvar centerY = node => node.y + node.dy / 2;\nvar getValue = entry => entry && entry.value || 0;\nvar getSumOfIds = (links, ids) => ids.reduce((result, id) => result + getValue(links[id]), 0);\nvar getSumWithWeightedSource = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var sourceNode = tree[link.source];\n  return result + centerY(sourceNode) * getValue(links[id]);\n}, 0);\nvar getSumWithWeightedTarget = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var targetNode = tree[link.target];\n  return result + centerY(targetNode) * getValue(links[id]);\n}, 0);\nvar ascendingY = (a, b) => a.y - b.y;\nvar searchTargetsAndSources = (links, id) => {\n  var sourceNodes = [];\n  var sourceLinks = [];\n  var targetNodes = [];\n  var targetLinks = [];\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i];\n    if (link.source === id) {\n      targetNodes.push(link.target);\n      targetLinks.push(i);\n    }\n    if (link.target === id) {\n      sourceNodes.push(link.source);\n      sourceLinks.push(i);\n    }\n  }\n  return {\n    sourceNodes,\n    sourceLinks,\n    targetLinks,\n    targetNodes\n  };\n};\nvar updateDepthOfTargets = (tree, curNode) => {\n  var {\n    targetNodes\n  } = curNode;\n  for (var i = 0, len = targetNodes.length; i < len; i++) {\n    var target = tree[targetNodes[i]];\n    if (target) {\n      target.depth = Math.max(curNode.depth + 1, target.depth);\n      updateDepthOfTargets(tree, target);\n    }\n  }\n};\nvar getNodesTree = (_ref, width, nodeWidth, align) => {\n  var _maxBy$depth, _maxBy;\n  var {\n    nodes,\n    links\n  } = _ref;\n  var tree = nodes.map((entry, index) => {\n    var result = searchTargetsAndSources(links, index);\n    return _objectSpread(_objectSpread(_objectSpread({}, entry), result), {}, {\n      value: Math.max(getSumOfIds(links, result.sourceLinks), getSumOfIds(links, result.targetLinks)),\n      depth: 0\n    });\n  });\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!node.sourceNodes.length) {\n      updateDepthOfTargets(tree, node);\n    }\n  }\n  var maxDepth = (_maxBy$depth = (_maxBy = maxBy(tree, entry => entry.depth)) === null || _maxBy === void 0 ? void 0 : _maxBy.depth) !== null && _maxBy$depth !== void 0 ? _maxBy$depth : 0;\n  if (maxDepth >= 1) {\n    var childWidth = (width - nodeWidth) / maxDepth;\n    for (var _i = 0, _len = tree.length; _i < _len; _i++) {\n      var _node = tree[_i];\n      if (!_node.targetNodes.length) {\n        if (align === 'justify') {\n          _node.depth = maxDepth;\n        }\n      }\n      _node.x = _node.depth * childWidth;\n      _node.dx = nodeWidth;\n    }\n  }\n  return {\n    tree,\n    maxDepth\n  };\n};\nvar getDepthTree = tree => {\n  var result = [];\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!result[node.depth]) {\n      result[node.depth] = [];\n    }\n    result[node.depth].push(node);\n  }\n  return result;\n};\nvar updateYOfTree = (depthTree, height, nodePadding, links, verticalAlign) => {\n  var yRatio = Math.min(...depthTree.map(nodes => (height - (nodes.length - 1) * nodePadding) / sumBy(nodes, getValue)));\n  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {\n    var nodes = depthTree[d];\n    if (verticalAlign === 'top') {\n      var currentY = 0;\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        node.dy = node.value * yRatio;\n        node.y = currentY;\n        currentY += node.dy + nodePadding;\n      }\n    } else {\n      for (var _i2 = 0, _len2 = nodes.length; _i2 < _len2; _i2++) {\n        var _node2 = nodes[_i2];\n        _node2.y = _i2;\n        _node2.dy = _node2.value * yRatio;\n      }\n    }\n  }\n  return links.map(link => _objectSpread(_objectSpread({}, link), {}, {\n    dy: getValue(link) * yRatio\n  }));\n};\nvar resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {\n  var sort = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  for (var i = 0, len = depthTree.length; i < len; i++) {\n    var nodes = depthTree[i];\n    var n = nodes.length;\n\n    // Sort by the value of y\n    if (sort) {\n      nodes.sort(ascendingY);\n    }\n    var y0 = 0;\n    for (var j = 0; j < n; j++) {\n      var node = nodes[j];\n      var dy = y0 - node.y;\n      if (dy > 0) {\n        node.y += dy;\n      }\n      y0 = node.y + node.dy + nodePadding;\n    }\n    y0 = height + nodePadding;\n    for (var _j = n - 1; _j >= 0; _j--) {\n      var _node3 = nodes[_j];\n      var _dy = _node3.y + _node3.dy + nodePadding - y0;\n      if (_dy > 0) {\n        _node3.y -= _dy;\n        y0 = _node3.y;\n      } else {\n        break;\n      }\n    }\n  }\n};\nvar relaxLeftToRight = (tree, depthTree, links, alpha) => {\n  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.sourceLinks.length) {\n        var sourceSum = getSumOfIds(links, node.sourceLinks);\n        var weightedSum = getSumWithWeightedSource(tree, links, node.sourceLinks);\n        var y = weightedSum / sourceSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar relaxRightToLeft = (tree, depthTree, links, alpha) => {\n  for (var i = depthTree.length - 1; i >= 0; i--) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.targetLinks.length) {\n        var targetSum = getSumOfIds(links, node.targetLinks);\n        var weightedSum = getSumWithWeightedTarget(tree, links, node.targetLinks);\n        var y = weightedSum / targetSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar updateYOfLinks = (tree, links) => {\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    var sy = 0;\n    var ty = 0;\n    node.targetLinks.sort((a, b) => tree[links[a].target].y - tree[links[b].target].y);\n    node.sourceLinks.sort((a, b) => tree[links[a].source].y - tree[links[b].source].y);\n    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {\n      var link = links[node.targetLinks[j]];\n      if (link) {\n        // @ts-expect-error we should refactor this to immutable\n        link.sy = sy;\n        sy += link.dy;\n      }\n    }\n    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {\n      var _link = links[node.sourceLinks[_j2]];\n      if (_link) {\n        // @ts-expect-error we should refactor this to immutable\n        _link.ty = ty;\n        ty += _link.dy;\n      }\n    }\n  }\n};\nvar computeData = _ref2 => {\n  var {\n    data,\n    width,\n    height,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    verticalAlign,\n    align\n  } = _ref2;\n  var {\n    links\n  } = data;\n  var {\n    tree\n  } = getNodesTree(data, width, nodeWidth, align);\n  var depthTree = getDepthTree(tree);\n  var linksWithDy = updateYOfTree(depthTree, height, nodePadding, links, verticalAlign);\n  resolveCollisions(depthTree, height, nodePadding, sort);\n  if (verticalAlign === 'justify') {\n    var alpha = 1;\n    for (var i = 1; i <= iterations; i++) {\n      relaxRightToLeft(tree, depthTree, linksWithDy, alpha *= 0.99);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n      relaxLeftToRight(tree, depthTree, linksWithDy, alpha);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n    }\n  }\n  updateYOfLinks(tree, linksWithDy);\n  // @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\n  var newLinks = linksWithDy;\n  return {\n    nodes: tree,\n    links: newLinks\n  };\n};\nvar getNodeCoordinateOfTooltip = item => {\n  return {\n    x: +item.x + +item.width / 2,\n    y: +item.y + +item.height / 2\n  };\n};\nvar getLinkCoordinateOfTooltip = item => {\n  return 'sourceX' in item ? {\n    x: (item.sourceX + item.targetX) / 2,\n    y: (item.sourceY + item.targetY) / 2\n  } : undefined;\n};\nvar getPayloadOfTooltip = (item, type, nameKey) => {\n  var {\n    payload\n  } = item;\n  if (type === 'node') {\n    return {\n      payload,\n      name: getValueByDataKey(payload, nameKey, ''),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  if ('source' in payload && payload.source && payload.target) {\n    var sourceName = getValueByDataKey(payload.source, nameKey, '');\n    var targetName = getValueByDataKey(payload.target, nameKey, '');\n    return {\n      payload,\n      name: \"\".concat(sourceName, \" - \").concat(targetName),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  return undefined;\n};\nexport var sankeyPayloadSearcher = (_, activeIndex, computedData, nameKey) => {\n  if (activeIndex == null || typeof activeIndex !== 'string') {\n    return undefined;\n  }\n  var splitIndex = activeIndex.split('-');\n  var [targetType, index] = splitIndex;\n  var item = get(computedData, \"\".concat(targetType, \"s[\").concat(index, \"]\"));\n  if (item) {\n    var payload = getPayloadOfTooltip(item, targetType, nameKey);\n    return payload;\n  }\n  return undefined;\n};\nvar options = {\n  chartName: 'Sankey',\n  defaultTooltipEventType: 'item',\n  validateTooltipEventTypes: ['item'],\n  tooltipPayloadSearcher: sankeyPayloadSearcher,\n  eventEmitter: undefined\n};\nvar SetSankeyTooltipEntrySettings = /*#__PURE__*/React.memo(_ref3 => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    data\n  } = _ref3;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide: false,\n      type: undefined,\n      color: fill,\n      unit: ''\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\n\n// TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\n\nfunction renderLinkItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  var {\n      sourceX,\n      sourceY,\n      sourceControlX,\n      targetX,\n      targetY,\n      targetControlX,\n      linkWidth\n    } = props,\n    others = _objectWithoutProperties(props, _excluded);\n  return /*#__PURE__*/React.createElement(\"path\", _extends({\n    className: \"recharts-sankey-link\",\n    d: \"\\n          M\".concat(sourceX, \",\").concat(sourceY, \"\\n          C\").concat(sourceControlX, \",\").concat(sourceY, \" \").concat(targetControlX, \",\").concat(targetY, \" \").concat(targetX, \",\").concat(targetY, \"\\n        \"),\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: linkWidth,\n    strokeOpacity: \"0.2\"\n  }, svgPropertiesNoEvents(others)));\n}\nvar buildLinkProps = _ref4 => {\n  var {\n    link,\n    nodes,\n    left,\n    top,\n    i,\n    linkContent,\n    linkCurvature\n  } = _ref4;\n  var {\n    sy: sourceRelativeY,\n    ty: targetRelativeY,\n    dy: linkWidth\n  } = link;\n  var sourceNode = nodes[link.source];\n  var targetNode = nodes[link.target];\n  var sourceX = sourceNode.x + sourceNode.dx + left;\n  var targetX = targetNode.x + left;\n  var interpolationFunc = interpolationGenerator(sourceX, targetX);\n  var sourceControlX = interpolationFunc(linkCurvature);\n  var targetControlX = interpolationFunc(1 - linkCurvature);\n  var sourceY = sourceNode.y + sourceRelativeY + linkWidth / 2 + top;\n  var targetY = targetNode.y + targetRelativeY + linkWidth / 2 + top;\n  var linkProps = _objectSpread({\n    sourceX,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetX,\n    sourceY,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetY,\n    sourceControlX,\n    targetControlX,\n    sourceRelativeY,\n    targetRelativeY,\n    linkWidth,\n    index: i,\n    payload: _objectSpread(_objectSpread({}, link), {}, {\n      source: sourceNode,\n      target: targetNode\n    })\n  }, svgPropertiesNoEventsFromUnknown(linkContent));\n  return linkProps;\n};\nfunction SankeyLinkElement(_ref5) {\n  var {\n    props,\n    i,\n    linkContent,\n    onMouseEnter: _onMouseEnter,\n    onMouseLeave: _onMouseLeave,\n    onClick: _onClick,\n    dataKey\n  } = _ref5;\n  var activeCoordinate = getLinkCoordinateOfTooltip(props);\n  var activeIndex = \"link-\".concat(i);\n  var dispatch = useAppDispatch();\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderLinkItem(linkContent, props));\n}\nfunction AllSankeyLinkElements(_ref6) {\n  var {\n    modifiedLinks,\n    links,\n    linkContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-links\",\n    key: \"recharts-sankey-links\"\n  }, links.map((link, i) => {\n    var linkProps = modifiedLinks[i];\n    return /*#__PURE__*/React.createElement(SankeyLinkElement, {\n      key: \"link-\".concat(link.source, \"-\").concat(link.target, \"-\").concat(link.value),\n      props: linkProps,\n      linkContent: linkContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nfunction renderNodeItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  return (/*#__PURE__*/\n    // @ts-expect-error recharts radius is not compatible with SVG radius\n    React.createElement(Rectangle, _extends({\n      className: \"recharts-sankey-node\",\n      fill: \"#0088fe\",\n      fillOpacity: \"0.8\"\n    }, svgPropertiesNoEvents(props)))\n  );\n}\nvar buildNodeProps = _ref7 => {\n  var {\n    node,\n    nodeContent,\n    top,\n    left,\n    i\n  } = _ref7;\n  var {\n    x,\n    y,\n    dx,\n    dy\n  } = node;\n  // @ts-expect-error nodeContent is passing in unknown props\n  var nodeProps = _objectSpread(_objectSpread({}, svgPropertiesNoEventsFromUnknown(nodeContent)), {}, {\n    x: x + left,\n    y: y + top,\n    width: dx,\n    height: dy,\n    index: i,\n    payload: node\n  });\n  return nodeProps;\n};\nfunction NodeElement(_ref8) {\n  var {\n    props,\n    nodeContent,\n    i,\n    onMouseEnter: _onMouseEnter2,\n    onMouseLeave: _onMouseLeave2,\n    onClick: _onClick2,\n    dataKey\n  } = _ref8;\n  var dispatch = useAppDispatch();\n  var activeCoordinate = getNodeCoordinateOfTooltip(props);\n  var activeIndex = \"node-\".concat(i);\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter2(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave2(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick2(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderNodeItem(nodeContent, props));\n}\nfunction AllNodeElements(_ref9) {\n  var {\n    modifiedNodes,\n    nodeContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref9;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-nodes\",\n    key: \"recharts-sankey-nodes\"\n  }, modifiedNodes.map((modifiedNode, i) => {\n    return /*#__PURE__*/React.createElement(NodeElement, {\n      key: \"node-\".concat(modifiedNode.index, \"-\").concat(modifiedNode.x, \"-\").concat(modifiedNode.y),\n      props: modifiedNode,\n      nodeContent: nodeContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nexport var sankeyDefaultProps = {\n  align: 'justify',\n  dataKey: 'value',\n  iterations: 32,\n  linkCurvature: 0.5,\n  margin: {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5\n  },\n  nameKey: 'name',\n  nodePadding: 10,\n  nodeWidth: 10,\n  sort: true,\n  verticalAlign: 'justify'\n};\nfunction SankeyImpl(props) {\n  var {\n      className,\n      style,\n      children\n    } = props,\n    others = _objectWithoutProperties(props, _excluded2);\n  var {\n    link,\n    dataKey,\n    node,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    data,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    linkCurvature,\n    margin,\n    verticalAlign,\n    align\n  } = props;\n  var attrs = svgPropertiesNoEvents(others);\n  var width = useChartWidth();\n  var height = useChartHeight();\n  var {\n    links,\n    modifiedLinks,\n    modifiedNodes\n  } = useMemo(() => {\n    var _margin$left, _margin$right, _margin$top, _margin$bottom;\n    if (!data || !width || !height || width <= 0 || height <= 0) {\n      return {\n        nodes: [],\n        links: [],\n        modifiedLinks: [],\n        modifiedNodes: []\n      };\n    }\n    var contentWidth = width - ((_margin$left = margin.left) !== null && _margin$left !== void 0 ? _margin$left : 0) - ((_margin$right = margin.right) !== null && _margin$right !== void 0 ? _margin$right : 0);\n    var contentHeight = height - ((_margin$top = margin.top) !== null && _margin$top !== void 0 ? _margin$top : 0) - ((_margin$bottom = margin.bottom) !== null && _margin$bottom !== void 0 ? _margin$bottom : 0);\n    var computed = computeData({\n      data,\n      width: contentWidth,\n      height: contentHeight,\n      iterations,\n      nodeWidth,\n      nodePadding,\n      sort,\n      verticalAlign,\n      align\n    });\n    var top = margin.top || 0;\n    var left = margin.left || 0;\n    var newModifiedLinks = computed.links.map((l, i) => {\n      return buildLinkProps({\n        link: l,\n        nodes: computed.nodes,\n        i,\n        top,\n        left,\n        linkContent: link,\n        linkCurvature\n      });\n    });\n    var newModifiedNodes = computed.nodes.map((n, i) => {\n      return buildNodeProps({\n        node: n,\n        nodeContent: node,\n        i,\n        top,\n        left\n      });\n    });\n    return {\n      nodes: computed.nodes,\n      links: computed.links,\n      modifiedLinks: newModifiedLinks,\n      modifiedNodes: newModifiedNodes\n    };\n  }, [data, width, height, margin, iterations, nodeWidth, nodePadding, sort, link, node, linkCurvature, align, verticalAlign]);\n  var handleMouseEnter = useCallback((item, type, e) => {\n    if (onMouseEnter) {\n      onMouseEnter(item, type, e);\n    }\n  }, [onMouseEnter]);\n  var handleMouseLeave = useCallback((item, type, e) => {\n    if (onMouseLeave) {\n      onMouseLeave(item, type, e);\n    }\n  }, [onMouseLeave]);\n  var handleClick = useCallback((item, type, e) => {\n    if (onClick) {\n      onClick(item, type, e);\n    }\n  }, [onClick]);\n  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !data || !data.links || !data.nodes) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetComputedData, {\n    computedData: {\n      links: modifiedLinks,\n      nodes: modifiedNodes\n    }\n  }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n    width: width,\n    height: height\n  }), children, /*#__PURE__*/React.createElement(AllSankeyLinkElements, {\n    links: links,\n    modifiedLinks: modifiedLinks,\n    linkContent: link,\n    dataKey: dataKey,\n    onMouseEnter: (linkProps, e) => handleMouseEnter(linkProps, 'link', e),\n    onMouseLeave: (linkProps, e) => handleMouseLeave(linkProps, 'link', e),\n    onClick: (linkProps, e) => handleClick(linkProps, 'link', e)\n  }), /*#__PURE__*/React.createElement(AllNodeElements, {\n    modifiedNodes: modifiedNodes,\n    nodeContent: node,\n    dataKey: dataKey,\n    onMouseEnter: (nodeProps, e) => handleMouseEnter(nodeProps, 'node', e),\n    onMouseLeave: (nodeProps, e) => handleMouseLeave(nodeProps, 'node', e),\n    onClick: (nodeProps, e) => handleClick(nodeProps, 'node', e)\n  })));\n}\nexport function Sankey(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, sankeyDefaultProps);\n  var {\n    width,\n    height,\n    style,\n    className\n  } = props;\n  var [tooltipPortal, setTooltipPortal] = useState(null);\n  return /*#__PURE__*/React.createElement(RechartsStoreProvider, {\n    preloadedState: {\n      options\n    },\n    reduxStoreName: className !== null && className !== void 0 ? className : 'Sankey'\n  }, /*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    data: props.data\n  }), /*#__PURE__*/React.createElement(ReportChartSize, {\n    width: width,\n    height: height\n  }), /*#__PURE__*/React.createElement(ReportChartMargin, {\n    margin: props.margin\n  }), /*#__PURE__*/React.createElement(RechartsWrapper, {\n    className: className,\n    style: style,\n    width: width,\n    height: height\n    /*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */,\n    responsive: false,\n    ref: node => {\n      if (node && !tooltipPortal) {\n        setTooltipPortal(node);\n      }\n    },\n    onMouseEnter: undefined,\n    onMouseLeave: undefined,\n    onClick: undefined,\n    onMouseMove: undefined,\n    onMouseDown: undefined,\n    onMouseUp: undefined,\n    onContextMenu: undefined,\n    onDoubleClick: undefined,\n    onTouchStart: undefined,\n    onTouchMove: undefined,\n    onTouchEnd: undefined\n  }, /*#__PURE__*/React.createElement(TooltipPortalContext.Provider, {\n    value: tooltipPortal\n  }, /*#__PURE__*/React.createElement(SankeyImpl, props))));\n}\nSankey.displayName = 'Sankey';","map":{"version":3,"names":["_excluded","_excluded2","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","getOwnPropertySymbols","indexOf","propertyIsEnumerable","ownKeys","keys","filter","getOwnPropertyDescriptor","enumerable","push","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","React","useCallback","useMemo","useState","maxBy","sumBy","get","Surface","Layer","Rectangle","getValueByDataKey","ReportChartMargin","ReportChartSize","useChartHeight","useChartWidth","TooltipPortalContext","RechartsWrapper","RechartsStoreProvider","useAppDispatch","mouseLeaveItem","setActiveClickItemIndex","setActiveMouseOverItemIndex","SetTooltipEntrySettings","SetComputedData","svgPropertiesNoEvents","svgPropertiesNoEventsFromUnknown","resolveDefaultProps","isPositiveNumber","interpolationGenerator","a","b","ka","kb","centerY","node","y","dy","getValue","entry","getSumOfIds","links","ids","reduce","result","id","getSumWithWeightedSource","tree","link","sourceNode","source","getSumWithWeightedTarget","targetNode","target","ascendingY","searchTargetsAndSources","sourceNodes","sourceLinks","targetNodes","targetLinks","len","updateDepthOfTargets","curNode","depth","Math","max","getNodesTree","_ref","width","nodeWidth","align","_maxBy$depth","_maxBy","nodes","map","index","maxDepth","childWidth","_i","_len","_node","x","dx","getDepthTree","updateYOfTree","depthTree","height","nodePadding","verticalAlign","yRatio","min","d","currentY","_i2","_len2","_node2","resolveCollisions","sort","undefined","y0","j","_j","_node3","_dy","relaxLeftToRight","alpha","sourceSum","weightedSum","relaxRightToLeft","targetSum","updateYOfLinks","sy","ty","tLen","_j2","sLen","_link","computeData","_ref2","data","iterations","linksWithDy","newLinks","getNodeCoordinateOfTooltip","item","getLinkCoordinateOfTooltip","sourceX","targetX","sourceY","targetY","getPayloadOfTooltip","type","nameKey","payload","name","sourceName","targetName","concat","sankeyPayloadSearcher","_","activeIndex","computedData","splitIndex","split","targetType","options","chartName","defaultTooltipEventType","validateTooltipEventTypes","tooltipPayloadSearcher","eventEmitter","SetSankeyTooltipEntrySettings","memo","_ref3","dataKey","stroke","strokeWidth","fill","tooltipEntrySettings","dataDefinedOnItem","positions","settings","hide","color","unit","createElement","renderLinkItem","option","props","isValidElement","cloneElement","sourceControlX","targetControlX","linkWidth","others","className","strokeOpacity","buildLinkProps","_ref4","left","top","linkContent","linkCurvature","sourceRelativeY","targetRelativeY","interpolationFunc","linkProps","SankeyLinkElement","_ref5","onMouseEnter","_onMouseEnter","onMouseLeave","_onMouseLeave","onClick","_onClick","activeCoordinate","dispatch","events","activeDataKey","AllSankeyLinkElements","_ref6","modifiedLinks","key","renderNodeItem","fillOpacity","buildNodeProps","_ref7","nodeContent","nodeProps","NodeElement","_ref8","_onMouseEnter2","_onMouseLeave2","_onClick2","AllNodeElements","_ref9","modifiedNodes","modifiedNode","sankeyDefaultProps","margin","right","bottom","SankeyImpl","style","children","attrs","_margin$left","_margin$right","_margin$top","_margin$bottom","contentWidth","contentHeight","computed","newModifiedLinks","l","newModifiedNodes","handleMouseEnter","handleMouseLeave","handleClick","Fragment","Sankey","outsideProps","tooltipPortal","setTooltipPortal","preloadedState","reduxStoreName","responsive","ref","onMouseMove","onMouseDown","onMouseUp","onContextMenu","onDoubleClick","onTouchStart","onTouchMove","onTouchEnd","Provider","displayName"],"sources":["C:/Users/LENOVO/Desktop/web/cloud/react-app/node_modules/recharts/es6/chart/Sankey.js"],"sourcesContent":["var _excluded = [\"sourceX\", \"sourceY\", \"sourceControlX\", \"targetX\", \"targetY\", \"targetControlX\", \"linkWidth\"],\n  _excluded2 = [\"className\", \"style\", \"children\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport maxBy from 'es-toolkit/compat/maxBy';\nimport sumBy from 'es-toolkit/compat/sumBy';\nimport get from 'es-toolkit/compat/get';\nimport { Surface } from '../container/Surface';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../shape/Rectangle';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { ReportChartMargin, ReportChartSize, useChartHeight, useChartWidth } from '../context/chartLayoutContext';\nimport { TooltipPortalContext } from '../context/tooltipPortalContext';\nimport { RechartsWrapper } from './RechartsWrapper';\nimport { RechartsStoreProvider } from '../state/RechartsStoreProvider';\nimport { useAppDispatch } from '../state/hooks';\nimport { mouseLeaveItem, setActiveClickItemIndex, setActiveMouseOverItemIndex } from '../state/tooltipSlice';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { SetComputedData } from '../context/chartDataContext';\nimport { svgPropertiesNoEvents, svgPropertiesNoEventsFromUnknown } from '../util/svgPropertiesNoEvents';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isPositiveNumber } from '../util/isWellBehavedNumber';\nvar interpolationGenerator = (a, b) => {\n  var ka = +a;\n  var kb = b - ka;\n  return t => ka + kb * t;\n};\nvar centerY = node => node.y + node.dy / 2;\nvar getValue = entry => entry && entry.value || 0;\nvar getSumOfIds = (links, ids) => ids.reduce((result, id) => result + getValue(links[id]), 0);\nvar getSumWithWeightedSource = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var sourceNode = tree[link.source];\n  return result + centerY(sourceNode) * getValue(links[id]);\n}, 0);\nvar getSumWithWeightedTarget = (tree, links, ids) => ids.reduce((result, id) => {\n  var link = links[id];\n  var targetNode = tree[link.target];\n  return result + centerY(targetNode) * getValue(links[id]);\n}, 0);\nvar ascendingY = (a, b) => a.y - b.y;\nvar searchTargetsAndSources = (links, id) => {\n  var sourceNodes = [];\n  var sourceLinks = [];\n  var targetNodes = [];\n  var targetLinks = [];\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i];\n    if (link.source === id) {\n      targetNodes.push(link.target);\n      targetLinks.push(i);\n    }\n    if (link.target === id) {\n      sourceNodes.push(link.source);\n      sourceLinks.push(i);\n    }\n  }\n  return {\n    sourceNodes,\n    sourceLinks,\n    targetLinks,\n    targetNodes\n  };\n};\nvar updateDepthOfTargets = (tree, curNode) => {\n  var {\n    targetNodes\n  } = curNode;\n  for (var i = 0, len = targetNodes.length; i < len; i++) {\n    var target = tree[targetNodes[i]];\n    if (target) {\n      target.depth = Math.max(curNode.depth + 1, target.depth);\n      updateDepthOfTargets(tree, target);\n    }\n  }\n};\nvar getNodesTree = (_ref, width, nodeWidth, align) => {\n  var _maxBy$depth, _maxBy;\n  var {\n    nodes,\n    links\n  } = _ref;\n  var tree = nodes.map((entry, index) => {\n    var result = searchTargetsAndSources(links, index);\n    return _objectSpread(_objectSpread(_objectSpread({}, entry), result), {}, {\n      value: Math.max(getSumOfIds(links, result.sourceLinks), getSumOfIds(links, result.targetLinks)),\n      depth: 0\n    });\n  });\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!node.sourceNodes.length) {\n      updateDepthOfTargets(tree, node);\n    }\n  }\n  var maxDepth = (_maxBy$depth = (_maxBy = maxBy(tree, entry => entry.depth)) === null || _maxBy === void 0 ? void 0 : _maxBy.depth) !== null && _maxBy$depth !== void 0 ? _maxBy$depth : 0;\n  if (maxDepth >= 1) {\n    var childWidth = (width - nodeWidth) / maxDepth;\n    for (var _i = 0, _len = tree.length; _i < _len; _i++) {\n      var _node = tree[_i];\n      if (!_node.targetNodes.length) {\n        if (align === 'justify') {\n          _node.depth = maxDepth;\n        }\n      }\n      _node.x = _node.depth * childWidth;\n      _node.dx = nodeWidth;\n    }\n  }\n  return {\n    tree,\n    maxDepth\n  };\n};\nvar getDepthTree = tree => {\n  var result = [];\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    if (!result[node.depth]) {\n      result[node.depth] = [];\n    }\n    result[node.depth].push(node);\n  }\n  return result;\n};\nvar updateYOfTree = (depthTree, height, nodePadding, links, verticalAlign) => {\n  var yRatio = Math.min(...depthTree.map(nodes => (height - (nodes.length - 1) * nodePadding) / sumBy(nodes, getValue)));\n  for (var d = 0, maxDepth = depthTree.length; d < maxDepth; d++) {\n    var nodes = depthTree[d];\n    if (verticalAlign === 'top') {\n      var currentY = 0;\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        var node = nodes[i];\n        node.dy = node.value * yRatio;\n        node.y = currentY;\n        currentY += node.dy + nodePadding;\n      }\n    } else {\n      for (var _i2 = 0, _len2 = nodes.length; _i2 < _len2; _i2++) {\n        var _node2 = nodes[_i2];\n        _node2.y = _i2;\n        _node2.dy = _node2.value * yRatio;\n      }\n    }\n  }\n  return links.map(link => _objectSpread(_objectSpread({}, link), {}, {\n    dy: getValue(link) * yRatio\n  }));\n};\nvar resolveCollisions = function resolveCollisions(depthTree, height, nodePadding) {\n  var sort = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  for (var i = 0, len = depthTree.length; i < len; i++) {\n    var nodes = depthTree[i];\n    var n = nodes.length;\n\n    // Sort by the value of y\n    if (sort) {\n      nodes.sort(ascendingY);\n    }\n    var y0 = 0;\n    for (var j = 0; j < n; j++) {\n      var node = nodes[j];\n      var dy = y0 - node.y;\n      if (dy > 0) {\n        node.y += dy;\n      }\n      y0 = node.y + node.dy + nodePadding;\n    }\n    y0 = height + nodePadding;\n    for (var _j = n - 1; _j >= 0; _j--) {\n      var _node3 = nodes[_j];\n      var _dy = _node3.y + _node3.dy + nodePadding - y0;\n      if (_dy > 0) {\n        _node3.y -= _dy;\n        y0 = _node3.y;\n      } else {\n        break;\n      }\n    }\n  }\n};\nvar relaxLeftToRight = (tree, depthTree, links, alpha) => {\n  for (var i = 0, maxDepth = depthTree.length; i < maxDepth; i++) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.sourceLinks.length) {\n        var sourceSum = getSumOfIds(links, node.sourceLinks);\n        var weightedSum = getSumWithWeightedSource(tree, links, node.sourceLinks);\n        var y = weightedSum / sourceSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar relaxRightToLeft = (tree, depthTree, links, alpha) => {\n  for (var i = depthTree.length - 1; i >= 0; i--) {\n    var nodes = depthTree[i];\n    for (var j = 0, len = nodes.length; j < len; j++) {\n      var node = nodes[j];\n      if (node.targetLinks.length) {\n        var targetSum = getSumOfIds(links, node.targetLinks);\n        var weightedSum = getSumWithWeightedTarget(tree, links, node.targetLinks);\n        var y = weightedSum / targetSum;\n        node.y += (y - centerY(node)) * alpha;\n      }\n    }\n  }\n};\nvar updateYOfLinks = (tree, links) => {\n  for (var i = 0, len = tree.length; i < len; i++) {\n    var node = tree[i];\n    var sy = 0;\n    var ty = 0;\n    node.targetLinks.sort((a, b) => tree[links[a].target].y - tree[links[b].target].y);\n    node.sourceLinks.sort((a, b) => tree[links[a].source].y - tree[links[b].source].y);\n    for (var j = 0, tLen = node.targetLinks.length; j < tLen; j++) {\n      var link = links[node.targetLinks[j]];\n      if (link) {\n        // @ts-expect-error we should refactor this to immutable\n        link.sy = sy;\n        sy += link.dy;\n      }\n    }\n    for (var _j2 = 0, sLen = node.sourceLinks.length; _j2 < sLen; _j2++) {\n      var _link = links[node.sourceLinks[_j2]];\n      if (_link) {\n        // @ts-expect-error we should refactor this to immutable\n        _link.ty = ty;\n        ty += _link.dy;\n      }\n    }\n  }\n};\nvar computeData = _ref2 => {\n  var {\n    data,\n    width,\n    height,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    verticalAlign,\n    align\n  } = _ref2;\n  var {\n    links\n  } = data;\n  var {\n    tree\n  } = getNodesTree(data, width, nodeWidth, align);\n  var depthTree = getDepthTree(tree);\n  var linksWithDy = updateYOfTree(depthTree, height, nodePadding, links, verticalAlign);\n  resolveCollisions(depthTree, height, nodePadding, sort);\n  if (verticalAlign === 'justify') {\n    var alpha = 1;\n    for (var i = 1; i <= iterations; i++) {\n      relaxRightToLeft(tree, depthTree, linksWithDy, alpha *= 0.99);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n      relaxLeftToRight(tree, depthTree, linksWithDy, alpha);\n      resolveCollisions(depthTree, height, nodePadding, sort);\n    }\n  }\n  updateYOfLinks(tree, linksWithDy);\n  // @ts-expect-error updateYOfLinks modifies the links array to add sy and ty in place\n  var newLinks = linksWithDy;\n  return {\n    nodes: tree,\n    links: newLinks\n  };\n};\nvar getNodeCoordinateOfTooltip = item => {\n  return {\n    x: +item.x + +item.width / 2,\n    y: +item.y + +item.height / 2\n  };\n};\nvar getLinkCoordinateOfTooltip = item => {\n  return 'sourceX' in item ? {\n    x: (item.sourceX + item.targetX) / 2,\n    y: (item.sourceY + item.targetY) / 2\n  } : undefined;\n};\nvar getPayloadOfTooltip = (item, type, nameKey) => {\n  var {\n    payload\n  } = item;\n  if (type === 'node') {\n    return {\n      payload,\n      name: getValueByDataKey(payload, nameKey, ''),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  if ('source' in payload && payload.source && payload.target) {\n    var sourceName = getValueByDataKey(payload.source, nameKey, '');\n    var targetName = getValueByDataKey(payload.target, nameKey, '');\n    return {\n      payload,\n      name: \"\".concat(sourceName, \" - \").concat(targetName),\n      value: getValueByDataKey(payload, 'value')\n    };\n  }\n  return undefined;\n};\nexport var sankeyPayloadSearcher = (_, activeIndex, computedData, nameKey) => {\n  if (activeIndex == null || typeof activeIndex !== 'string') {\n    return undefined;\n  }\n  var splitIndex = activeIndex.split('-');\n  var [targetType, index] = splitIndex;\n  var item = get(computedData, \"\".concat(targetType, \"s[\").concat(index, \"]\"));\n  if (item) {\n    var payload = getPayloadOfTooltip(item, targetType, nameKey);\n    return payload;\n  }\n  return undefined;\n};\nvar options = {\n  chartName: 'Sankey',\n  defaultTooltipEventType: 'item',\n  validateTooltipEventTypes: ['item'],\n  tooltipPayloadSearcher: sankeyPayloadSearcher,\n  eventEmitter: undefined\n};\nvar SetSankeyTooltipEntrySettings = /*#__PURE__*/React.memo(_ref3 => {\n  var {\n    dataKey,\n    nameKey,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    data\n  } = _ref3;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      name,\n      nameKey,\n      hide: false,\n      type: undefined,\n      color: fill,\n      unit: ''\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\n\n// TODO: improve types - NodeOptions uses SankeyNode, LinkOptions uses LinkProps. Standardize.\n\nfunction renderLinkItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  var {\n      sourceX,\n      sourceY,\n      sourceControlX,\n      targetX,\n      targetY,\n      targetControlX,\n      linkWidth\n    } = props,\n    others = _objectWithoutProperties(props, _excluded);\n  return /*#__PURE__*/React.createElement(\"path\", _extends({\n    className: \"recharts-sankey-link\",\n    d: \"\\n          M\".concat(sourceX, \",\").concat(sourceY, \"\\n          C\").concat(sourceControlX, \",\").concat(sourceY, \" \").concat(targetControlX, \",\").concat(targetY, \" \").concat(targetX, \",\").concat(targetY, \"\\n        \"),\n    fill: \"none\",\n    stroke: \"#333\",\n    strokeWidth: linkWidth,\n    strokeOpacity: \"0.2\"\n  }, svgPropertiesNoEvents(others)));\n}\nvar buildLinkProps = _ref4 => {\n  var {\n    link,\n    nodes,\n    left,\n    top,\n    i,\n    linkContent,\n    linkCurvature\n  } = _ref4;\n  var {\n    sy: sourceRelativeY,\n    ty: targetRelativeY,\n    dy: linkWidth\n  } = link;\n  var sourceNode = nodes[link.source];\n  var targetNode = nodes[link.target];\n  var sourceX = sourceNode.x + sourceNode.dx + left;\n  var targetX = targetNode.x + left;\n  var interpolationFunc = interpolationGenerator(sourceX, targetX);\n  var sourceControlX = interpolationFunc(linkCurvature);\n  var targetControlX = interpolationFunc(1 - linkCurvature);\n  var sourceY = sourceNode.y + sourceRelativeY + linkWidth / 2 + top;\n  var targetY = targetNode.y + targetRelativeY + linkWidth / 2 + top;\n  var linkProps = _objectSpread({\n    sourceX,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetX,\n    sourceY,\n    // @ts-expect-error the linkContent from below is contributing unknown props\n    targetY,\n    sourceControlX,\n    targetControlX,\n    sourceRelativeY,\n    targetRelativeY,\n    linkWidth,\n    index: i,\n    payload: _objectSpread(_objectSpread({}, link), {}, {\n      source: sourceNode,\n      target: targetNode\n    })\n  }, svgPropertiesNoEventsFromUnknown(linkContent));\n  return linkProps;\n};\nfunction SankeyLinkElement(_ref5) {\n  var {\n    props,\n    i,\n    linkContent,\n    onMouseEnter: _onMouseEnter,\n    onMouseLeave: _onMouseLeave,\n    onClick: _onClick,\n    dataKey\n  } = _ref5;\n  var activeCoordinate = getLinkCoordinateOfTooltip(props);\n  var activeIndex = \"link-\".concat(i);\n  var dispatch = useAppDispatch();\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderLinkItem(linkContent, props));\n}\nfunction AllSankeyLinkElements(_ref6) {\n  var {\n    modifiedLinks,\n    links,\n    linkContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref6;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-links\",\n    key: \"recharts-sankey-links\"\n  }, links.map((link, i) => {\n    var linkProps = modifiedLinks[i];\n    return /*#__PURE__*/React.createElement(SankeyLinkElement, {\n      key: \"link-\".concat(link.source, \"-\").concat(link.target, \"-\").concat(link.value),\n      props: linkProps,\n      linkContent: linkContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nfunction renderNodeItem(option, props) {\n  if (/*#__PURE__*/React.isValidElement(option)) {\n    return /*#__PURE__*/React.cloneElement(option, props);\n  }\n  if (typeof option === 'function') {\n    return option(props);\n  }\n  return (\n    /*#__PURE__*/\n    // @ts-expect-error recharts radius is not compatible with SVG radius\n    React.createElement(Rectangle, _extends({\n      className: \"recharts-sankey-node\",\n      fill: \"#0088fe\",\n      fillOpacity: \"0.8\"\n    }, svgPropertiesNoEvents(props)))\n  );\n}\nvar buildNodeProps = _ref7 => {\n  var {\n    node,\n    nodeContent,\n    top,\n    left,\n    i\n  } = _ref7;\n  var {\n    x,\n    y,\n    dx,\n    dy\n  } = node;\n  // @ts-expect-error nodeContent is passing in unknown props\n  var nodeProps = _objectSpread(_objectSpread({}, svgPropertiesNoEventsFromUnknown(nodeContent)), {}, {\n    x: x + left,\n    y: y + top,\n    width: dx,\n    height: dy,\n    index: i,\n    payload: node\n  });\n  return nodeProps;\n};\nfunction NodeElement(_ref8) {\n  var {\n    props,\n    nodeContent,\n    i,\n    onMouseEnter: _onMouseEnter2,\n    onMouseLeave: _onMouseLeave2,\n    onClick: _onClick2,\n    dataKey\n  } = _ref8;\n  var dispatch = useAppDispatch();\n  var activeCoordinate = getNodeCoordinateOfTooltip(props);\n  var activeIndex = \"node-\".concat(i);\n  var events = {\n    onMouseEnter: e => {\n      dispatch(setActiveMouseOverItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onMouseEnter2(props, e);\n    },\n    onMouseLeave: e => {\n      dispatch(mouseLeaveItem());\n      _onMouseLeave2(props, e);\n    },\n    onClick: e => {\n      dispatch(setActiveClickItemIndex({\n        activeIndex,\n        activeDataKey: dataKey,\n        activeCoordinate\n      }));\n      _onClick2(props, e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(Layer, events, renderNodeItem(nodeContent, props));\n}\nfunction AllNodeElements(_ref9) {\n  var {\n    modifiedNodes,\n    nodeContent,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    dataKey\n  } = _ref9;\n  return /*#__PURE__*/React.createElement(Layer, {\n    className: \"recharts-sankey-nodes\",\n    key: \"recharts-sankey-nodes\"\n  }, modifiedNodes.map((modifiedNode, i) => {\n    return /*#__PURE__*/React.createElement(NodeElement, {\n      key: \"node-\".concat(modifiedNode.index, \"-\").concat(modifiedNode.x, \"-\").concat(modifiedNode.y),\n      props: modifiedNode,\n      nodeContent: nodeContent,\n      i: i,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      dataKey: dataKey\n    });\n  }));\n}\nexport var sankeyDefaultProps = {\n  align: 'justify',\n  dataKey: 'value',\n  iterations: 32,\n  linkCurvature: 0.5,\n  margin: {\n    top: 5,\n    right: 5,\n    bottom: 5,\n    left: 5\n  },\n  nameKey: 'name',\n  nodePadding: 10,\n  nodeWidth: 10,\n  sort: true,\n  verticalAlign: 'justify'\n};\nfunction SankeyImpl(props) {\n  var {\n      className,\n      style,\n      children\n    } = props,\n    others = _objectWithoutProperties(props, _excluded2);\n  var {\n    link,\n    dataKey,\n    node,\n    onMouseEnter,\n    onMouseLeave,\n    onClick,\n    data,\n    iterations,\n    nodeWidth,\n    nodePadding,\n    sort,\n    linkCurvature,\n    margin,\n    verticalAlign,\n    align\n  } = props;\n  var attrs = svgPropertiesNoEvents(others);\n  var width = useChartWidth();\n  var height = useChartHeight();\n  var {\n    links,\n    modifiedLinks,\n    modifiedNodes\n  } = useMemo(() => {\n    var _margin$left, _margin$right, _margin$top, _margin$bottom;\n    if (!data || !width || !height || width <= 0 || height <= 0) {\n      return {\n        nodes: [],\n        links: [],\n        modifiedLinks: [],\n        modifiedNodes: []\n      };\n    }\n    var contentWidth = width - ((_margin$left = margin.left) !== null && _margin$left !== void 0 ? _margin$left : 0) - ((_margin$right = margin.right) !== null && _margin$right !== void 0 ? _margin$right : 0);\n    var contentHeight = height - ((_margin$top = margin.top) !== null && _margin$top !== void 0 ? _margin$top : 0) - ((_margin$bottom = margin.bottom) !== null && _margin$bottom !== void 0 ? _margin$bottom : 0);\n    var computed = computeData({\n      data,\n      width: contentWidth,\n      height: contentHeight,\n      iterations,\n      nodeWidth,\n      nodePadding,\n      sort,\n      verticalAlign,\n      align\n    });\n    var top = margin.top || 0;\n    var left = margin.left || 0;\n    var newModifiedLinks = computed.links.map((l, i) => {\n      return buildLinkProps({\n        link: l,\n        nodes: computed.nodes,\n        i,\n        top,\n        left,\n        linkContent: link,\n        linkCurvature\n      });\n    });\n    var newModifiedNodes = computed.nodes.map((n, i) => {\n      return buildNodeProps({\n        node: n,\n        nodeContent: node,\n        i,\n        top,\n        left\n      });\n    });\n    return {\n      nodes: computed.nodes,\n      links: computed.links,\n      modifiedLinks: newModifiedLinks,\n      modifiedNodes: newModifiedNodes\n    };\n  }, [data, width, height, margin, iterations, nodeWidth, nodePadding, sort, link, node, linkCurvature, align, verticalAlign]);\n  var handleMouseEnter = useCallback((item, type, e) => {\n    if (onMouseEnter) {\n      onMouseEnter(item, type, e);\n    }\n  }, [onMouseEnter]);\n  var handleMouseLeave = useCallback((item, type, e) => {\n    if (onMouseLeave) {\n      onMouseLeave(item, type, e);\n    }\n  }, [onMouseLeave]);\n  var handleClick = useCallback((item, type, e) => {\n    if (onClick) {\n      onClick(item, type, e);\n    }\n  }, [onClick]);\n  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !data || !data.links || !data.nodes) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetComputedData, {\n    computedData: {\n      links: modifiedLinks,\n      nodes: modifiedNodes\n    }\n  }), /*#__PURE__*/React.createElement(Surface, _extends({}, attrs, {\n    width: width,\n    height: height\n  }), children, /*#__PURE__*/React.createElement(AllSankeyLinkElements, {\n    links: links,\n    modifiedLinks: modifiedLinks,\n    linkContent: link,\n    dataKey: dataKey,\n    onMouseEnter: (linkProps, e) => handleMouseEnter(linkProps, 'link', e),\n    onMouseLeave: (linkProps, e) => handleMouseLeave(linkProps, 'link', e),\n    onClick: (linkProps, e) => handleClick(linkProps, 'link', e)\n  }), /*#__PURE__*/React.createElement(AllNodeElements, {\n    modifiedNodes: modifiedNodes,\n    nodeContent: node,\n    dataKey: dataKey,\n    onMouseEnter: (nodeProps, e) => handleMouseEnter(nodeProps, 'node', e),\n    onMouseLeave: (nodeProps, e) => handleMouseLeave(nodeProps, 'node', e),\n    onClick: (nodeProps, e) => handleClick(nodeProps, 'node', e)\n  })));\n}\nexport function Sankey(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, sankeyDefaultProps);\n  var {\n    width,\n    height,\n    style,\n    className\n  } = props;\n  var [tooltipPortal, setTooltipPortal] = useState(null);\n  return /*#__PURE__*/React.createElement(RechartsStoreProvider, {\n    preloadedState: {\n      options\n    },\n    reduxStoreName: className !== null && className !== void 0 ? className : 'Sankey'\n  }, /*#__PURE__*/React.createElement(SetSankeyTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    nameKey: props.nameKey,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    data: props.data\n  }), /*#__PURE__*/React.createElement(ReportChartSize, {\n    width: width,\n    height: height\n  }), /*#__PURE__*/React.createElement(ReportChartMargin, {\n    margin: props.margin\n  }), /*#__PURE__*/React.createElement(RechartsWrapper, {\n    className: className,\n    style: style,\n    width: width,\n    height: height\n    /*\n     * Sankey, same as Treemap, suffers from overfilling the container\n     * and causing infinite render loops where the chart keeps growing.\n     */,\n    responsive: false,\n    ref: node => {\n      if (node && !tooltipPortal) {\n        setTooltipPortal(node);\n      }\n    },\n    onMouseEnter: undefined,\n    onMouseLeave: undefined,\n    onClick: undefined,\n    onMouseMove: undefined,\n    onMouseDown: undefined,\n    onMouseUp: undefined,\n    onContextMenu: undefined,\n    onDoubleClick: undefined,\n    onTouchStart: undefined,\n    onTouchMove: undefined,\n    onTouchEnd: undefined\n  }, /*#__PURE__*/React.createElement(TooltipPortalContext.Provider, {\n    value: tooltipPortal\n  }, /*#__PURE__*/React.createElement(SankeyImpl, props))));\n}\nSankey.displayName = 'Sankey';"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}